---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { I18n, negotiateLocale } from "@/i18n/utils";
import { getTitle } from "@/i18n/pageHeadings";

import CmnIndexPage from "@/components/index-pages/CmnIndexPage.tsx";
import EnIndexPage from "@/components/index-pages/EnIndexPage.tsx";
import JaIndexPage from "@/components/index-pages/JaIndexPage.tsx";
import NanIndexPage from "@/components/index-pages/NanIndexPage.tsx";
import ViIndexPage from "@/components/index-pages/ViIndexPage.tsx";
import WuuIndexPage from "@/components/index-pages/WuuIndexPage.tsx";
import YueHansIndexPage from "@/components/index-pages/YueHansIndexPage.tsx";
// YueIndexPage is handled by src/pages/index.astro

export function getStaticPaths() {
  return I18n.locales
    .filter((locale) => locale !== I18n.defaultLocale)
    .map((locale) => ({
      params: { locale },
    }));
}

const { locale } = Astro.params;

const title = getTitle("index", locale);
const negotiatedLocale = negotiateLocale(locale);
---

<BaseLayout lang={locale} title={title} flipTitle>
  {negotiatedLocale === "en" && <EnIndexPage client:load />}
  {negotiatedLocale === "cmn" && <CmnIndexPage client:load />}
  {negotiatedLocale === "nan" && <NanIndexPage client:load />}
  {negotiatedLocale === "vi" && <ViIndexPage client:load />}
  {negotiatedLocale === "wuu" && <WuuIndexPage client:load />}
  {negotiatedLocale === "yue_hans" && <YueHansIndexPage client:load />}
  {negotiatedLocale === "ja" && <JaIndexPage client:load />}
</BaseLayout>
